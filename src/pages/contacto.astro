---
import Layout from '../layouts/Layout.astro';
---

<Layout 
  title="Contacto - Transmisiones Automáticas SV"
  description="Contáctanos para cotizaciones, preguntas sobre nuestro inventario o para agendar una cita de servicio en nuestro taller en San Salvador."
>
  <main class="container">
    <div class="header">
      <h1>Hablemos</h1>
      <p>¿Tienes una consulta o necesitas una cotización? Estamos aquí para ayudarte.</p>
    </div>

    <div class="contact-grid">
      <div class="contact-info">
        <h3>Información Directa</h3>
        <p>
          <strong>Dirección:</strong><br>
          Calle Ficticia #123, San Salvador
        </p>
        <p>
          <strong>Teléfono y WhatsApp:</strong><br>
          <a href="tel:+50377778888">+503 7777-8888</a>
        </p>
        <p>
          <strong>Correo Electrónico:</strong><br>
          <a href="mailto:ventas@transmisionessv.com">ventas@transmisionessv.com</a>
        </p>
      </div>
      
      <form name="contacto" method="POST" data-netlify="true" class="contact-form">
        <input type="hidden" name="form-name" value="contacto" />
        
        <h3>Envíanos un Mensaje</h3>
        <div class="form-group">
          <label for="name">Nombre Completo</label>
          <input type="text" id="name" name="name" required />
        </div>
        <div class="form-group">
          <label for="email">Correo Electrónico</label>
          <input type="email" id="email" name="email" required />
        </div>
        <div class="form-group">
          <label for="message">¿En qué podemos ayudarte?</label>
          <textarea id="message" name="message" rows="5" required></textarea>
        </div>
        <button type="submit" class="btn">Enviar Mensaje</button>
      </form>
      
    </div>
  </main>
</Layout>

<style>
  .container { 
    max-width: 1100px; 
    margin: 2rem auto; 
    padding: 1rem; 
  }
  .header { 
    text-align: center; 
    margin-bottom: 3rem; 
  }
  .header h1 { 
    font-size: 2.5rem; 
    color: white; 
  }
  .header p { 
    font-size: 1.1rem; 
    color: var(--color-texto-secundario); 
    max-width: 600px; 
    margin: 0.5rem auto 0; 
  }
  
  .contact-grid {
    display: grid;
    grid-template-columns: 1fr 1.5fr; /* Dos columnas en desktop */
    gap: 3rem;
    background-color: var(--color-superficie);
    padding: 3rem;
    border-radius: 12px;
    border: 1px solid var(--color-borde);
  }
  
  .contact-info h3, .contact-form h3 { 
    font-size: 1.8rem; 
    color: var(--color-acento); 
    margin-bottom: 1.5rem; 
  }
  
  .contact-info p { 
    line-height: 1.8; 
    font-size: 1.1rem; 
  }
  .contact-info a { 
    color: var(--color-texto-principal); 
    text-decoration: none; 
  }
  .contact-info a:hover { 
    color: var(--color-acento); 
  }
  
  .form-group { 
    margin-bottom: 1.5rem; 
  }
  .form-group label { 
    display: block; 
    margin-bottom: 0.5rem; 
    color: var(--color-texto-secundario); 
  }
  .form-group input, .form-group textarea {
    width: 100%;
    padding: 0.8rem 1rem;
    background-color: var(--color-fondo);
    border: 1px solid var(--color-borde);
    border-radius: 6px;
    color: var(--color-texto-principal);
    font-size: 1rem;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  .form-group input:focus, .form-group textarea:focus {
    outline: none;
    border-color: var(--color-acento);
    box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3);
  }

  /* Esta es la regla que arregla el diseño en móviles */
  @media (max-width: 768px) {
    .header h1 {
      font-size: 2rem;
    }
    .contact-grid {
      grid-template-columns: 1fr; /* Forzamos a una sola columna */
      padding: 2rem 1.5rem;
      gap: 3rem;
    }
    .contact-info {
      text-align: center; /* Centramos el texto de info en móvil */
    }
  }
</style>
<script>
  const form = document.querySelector('form[name="contacto"]') as HTMLFormElement;
  if (form) {
    form.addEventListener('submit', (event) => {
      event.preventDefault();
      const formData = new FormData(form);
      const submitButton = form.querySelector('button[type="submit"]') as HTMLButtonElement;
      if (submitButton) {
        submitButton.textContent = 'Enviando...';
        submitButton.disabled = true;
      }
      fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams(formData as any).toString(),
      })
        .then(() => {
          window.location.href = '/gracias.html';
        })
        .catch((error) => {
          alert('Hubo un error al enviar el formulario. Por favor, inténtalo de nuevo.');
          if (submitButton) {
            submitButton.textContent = 'Enviar Mensaje';
            submitButton.disabled = false;
          }
        });
    });
  }
</script>